(self.webpackChunkarch_guide=self.webpackChunkarch_guide||[]).push([[599],{4181:(l,n,e)=>{"use strict";e.r(n),e.d(n,{data:()=>s});const s={key:"v-2c18def6",path:"/rookie/basic-install-detail.html",title:"基础安装详解",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"🔭 知其然，知其所以然",slug:"🔭-知其然-知其所以然",children:[]},{level:3,title:"🔖 这一节将会讨论：",slug:"🔖-这一节将会讨论",children:[]},{level:2,title:"💾 分区和格式化",slug:"💾-分区和格式化",children:[{level:3,title:"💾 为什么要用 Btrfs 文件系统",slug:"💾-为什么要用-btrfs-文件系统",children:[]},{level:3,title:"💾 传统 ext4 文件系统说明",slug:"💾-传统-ext4-文件系统说明",children:[]},{level:3,title:"🆕 全新安装",slug:"🆕-全新安装",children:[]},{level:3,title:"💾 Swap 分区和 Swap 文件",slug:"💾-swap-分区和-swap-文件",children:[]}]},{level:2,title:"💽 安装环境和新系统的关系",slug:"💽-安装环境和新系统的关系",children:[{level:3,title:"1. 🏠 建房子",slug:"_1-🏠-建房子",children:[]},{level:3,title:"2. 🛣️ 建立通道",slug:"_2-🛣️-建立通道",children:[]},{level:3,title:"3. 🛋️ 添置家具",slug:"_3-🛋️-添置家具",children:[]},{level:3,title:"4. 🚚 搬进新家",slug:"_4-🚚-搬进新家",children:[]}]},{level:2,title:"🥙 杂七杂八",slug:"🥙-杂七杂八",children:[]}],filePathRelative:"rookie/basic-install-detail.md",git:{updatedTime:1623405292e3,contributors:[{name:"icekylin",email:"wminid@yeah.net",commits:8}]}}},7405:(l,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>Mn});var s=e(6252),m=e(1834);const a=(0,s.Wm)("h1",{id:"基础安装详解"},[(0,s.Wm)("a",{class:"header-anchor",href:"#基础安装详解"},"#"),(0,s.Uk)(" 基础安装详解")],-1),t=(0,s.Wm)("h3",{id:"🔭-知其然-知其所以然"},[(0,s.Wm)("a",{class:"header-anchor",href:"#🔭-知其然-知其所以然"},"#"),(0,s.Uk)(" 🔭 知其然，知其所以然")],-1),W=(0,s.Uk)("这一节对上一节 "),c=(0,s.Uk)("archlinux 基础安装"),o=(0,s.Uk)(" 中关键的几步做出了更进一步的解释，知其然知其所以然。此节没有特定顺序，可根据需要选择性阅读"),u=(0,s.Wm)("p",null,[(0,s.Uk)("需要说明的是，本指南假定你有一定的 Linux 基础知识，基础知识相关的话题"),(0,s.Wm)("strong",null,"不会"),(0,s.Uk)("被讨论")],-1),i=(0,s.Wm)("h3",{id:"🔖-这一节将会讨论"},[(0,s.Wm)("a",{class:"header-anchor",href:"#🔖-这一节将会讨论"},"#"),(0,s.Uk)(" 🔖 这一节将会讨论：")],-1),r={class:"table-of-contents"},d=(0,s.Uk)("🔭 知其然，知其所以然"),k=(0,s.Uk)("🔖 这一节将会讨论："),p=(0,s.Uk)("💾 分区和格式化"),b=(0,s.Uk)("💾 为什么要用 Btrfs 文件系统"),U=(0,s.Uk)("💾 传统 ext4 文件系统说明"),h=(0,s.Uk)("🆕 全新安装"),f=(0,s.Uk)("💾 Swap 分区和 Swap 文件"),g=(0,s.Uk)("💽 安装环境和新系统的关系"),v=(0,s.Uk)("1. 🏠 建房子"),w=(0,s.Uk)("2. 🛣️ 建立通道"),_=(0,s.Uk)("3. 🛋️ 添置家具"),E=(0,s.Uk)("4. 🚚 搬进新家"),B=(0,s.Uk)("🥙 杂七杂八"),x=(0,s.Wm)("h2",{id:"💾-分区和格式化"},[(0,s.Wm)("a",{class:"header-anchor",href:"#💾-分区和格式化"},"#"),(0,s.Uk)(" 💾 分区和格式化")],-1),A=(0,s.Wm)("blockquote",null,[(0,s.Wm)("ol",null,[(0,s.Wm)("li",null,[(0,s.Uk)("因本指南介绍使用的文件系统是 "),(0,s.Wm)("code",null,"Btrfs"),(0,s.Uk)("，很多萌新可能有些不理解。这里有必要说明一下")]),(0,s.Wm)("li",null,[(0,s.Uk)("若"),(0,s.Wm)("strong",null,[(0,s.Uk)("执意要用传统的 "),(0,s.Wm)("code",null,"ext4"),(0,s.Uk)(" 文件系统")]),(0,s.Uk)("，本指南也给出了示例")]),(0,s.Wm)("li",null,[(0,s.Uk)("对于全盘格式化后"),(0,s.Wm)("strong",null,"全新安装"),(0,s.Uk)("的（单 archlinux 系统）同学，这里也给出了需要做的额外步骤的说明")]),(0,s.Wm)("li",null,[(0,s.Uk)("对于 "),(0,s.Wm)("strong",null,"Swap 分区还是 Swap 文件"),(0,s.Uk)(" 的话题，也会在此讨论")])])],-1),S=(0,s.Wm)("h3",{id:"💾-为什么要用-btrfs-文件系统"},[(0,s.Wm)("a",{class:"header-anchor",href:"#💾-为什么要用-btrfs-文件系统"},"#"),(0,s.Uk)(" 💾 为什么要用 Btrfs 文件系统")],-1),C=(0,s.Wm)("p",null,[(0,s.Wm)("img",{src:m.Z,alt:"Btrfs"})],-1),F=(0,s.Wm)("p",null,"纵观 Btrfs 的历史，可以说 Btrfs 未来的发展是道阻且长的。也让我们感受到开源社区也并不是一根绳上的蚂蚱 —— 开源社区之间也有着各种各样的分歧。",-1),G=(0,s.Wm)("p",null,"但不管怎么说，Btrfs 的未来现在来看是光明的；我们也可以在 archlinux 上享受到 Btrfs 文件系统的特性带来的好处：",-1),I=(0,s.Wm)("ol",null,[(0,s.Wm)("li",null,[(0,s.Uk)("快照 —— archlinux 作为滚动发行版，若滚挂了可以使用 Btrfs 的快照特性快速回滚 "),(0,s.Wm)("ul",null,[(0,s.Wm)("li",null,[(0,s.Uk)("若使用传统的 "),(0,s.Wm)("code",null,"ext4"),(0,s.Uk)(" 文件系统，我们可以使用 "),(0,s.Wm)("code",null,"timeshift"),(0,s.Uk)(" 的 "),(0,s.Wm)("code",null,"RSYNC"),(0,s.Uk)(" 模式进行增量备份。但是，一般来说 RSYNC 方式的快照大小略大于当前实际使用大小，也就是说实际上开启了 "),(0,s.Wm)("code",null,"timeshift"),(0,s.Uk)(" 的 "),(0,s.Wm)("code",null,"RSYNC"),(0,s.Uk)(" 模式快照相当于磁盘可用空间直接少了一半多。因为虽然 RSYNC 方式的快照是增量的，但历史最久远的快照依然是完整备份，随后才是增量的")])])]),(0,s.Wm)("li",null,"透明压缩 —— 可以大大减少磁盘的使用空间（压缩率大概在 10% 左右）")],-1),N={class:"custom-container tip"},T=(0,s.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示",-1),R=(0,s.Uk)("更多 Btrfs 文件系统介绍和操作请参阅 "),M=(0,s.Uk)("Btrfs 介绍与相关操作"),L=(0,s.Uk)("。"),D=(0,s.Wm)("h3",{id:"💾-传统-ext4-文件系统说明"},[(0,s.Wm)("a",{class:"header-anchor",href:"#💾-传统-ext4-文件系统说明"},"#"),(0,s.Uk)(" 💾 传统 ext4 文件系统说明")],-1),y=(0,s.Wm)("p",null,[(0,s.Uk)("若执意使用传统的 "),(0,s.Wm)("code",null,"ext4"),(0,s.Uk)(" 文件系统，那么分区的建议为：")],-1),q=(0,s.Wm)("ol",null,[(0,s.Wm)("li",null,[(0,s.Wm)("p",null,[(0,s.Uk)("若 archlinux 安装分区小于 "),(0,s.Wm)("code",null,"256GB"),(0,s.Uk)("：")]),(0,s.Wm)("ul",null,[(0,s.Wm)("li",null,[(0,s.Wm)("code",null,"/"),(0,s.Uk)(" 根目录："),(0,s.Wm)("code",null,"全部空间"),(0,s.Uk)("（用户主目录不单独分区）")]),(0,s.Wm)("li",null,[(0,s.Wm)("code",null,"/boot/efi"),(0,s.Uk)(" EFI 分区："),(0,s.Wm)("code",null,"256MB")]),(0,s.Wm)("li",null,[(0,s.Uk)("Swap 分区："),(0,s.Wm)("code",null,">= 电脑实际运行内存的 60%")])])]),(0,s.Wm)("li",null,[(0,s.Wm)("p",null,[(0,s.Uk)("若 archlinux 安装分区大于 "),(0,s.Wm)("code",null,"256GB"),(0,s.Uk)("：")]),(0,s.Wm)("ul",null,[(0,s.Wm)("li",null,[(0,s.Wm)("code",null,"/"),(0,s.Uk)(" 根目录："),(0,s.Wm)("code",null,"128GB")]),(0,s.Wm)("li",null,[(0,s.Wm)("code",null,"/home"),(0,s.Uk)(" 用户主目录："),(0,s.Wm)("code",null,"剩余的全部空间")]),(0,s.Wm)("li",null,[(0,s.Wm)("code",null,"/boot/efi"),(0,s.Uk)(" EFI 分区："),(0,s.Wm)("code",null,"256MB")]),(0,s.Wm)("li",null,[(0,s.Uk)("Swap 分区："),(0,s.Wm)("code",null,">= 电脑实际运行内存的 60%")])])])],-1),P=(0,s.Uk)("分区同样使用 "),Y=(0,s.Wm)("code",null,"cfdisk",-1),V=(0,s.Uk)(" 工具，具体操作类似上一节 "),O=(0,s.Uk)("7-1. 分区"),X=(0,s.Uk)(" 所述，这里不再赘述。"),z=(0,s.Wm)("ul",null,[(0,s.Wm)("li",null,[(0,s.Uk)("使用以下命令格式化 "),(0,s.Wm)("code",null,"ext4"),(0,s.Uk)(" 分区：")])],-1),Z=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,"mkfs.ext4 /dev/sdax\n")]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br")])],-1),j=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,"mkfs.ext4 /dev/nvmexn1pn\n")]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br")])],-1),H=(0,s.Wm)("ul",null,[(0,s.Wm)("li",null,[(0,s.Uk)("使用以下命令挂载 "),(0,s.Wm)("code",null,"ext4"),(0,s.Uk)(" 分区：")])],-1),J=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Wm)("span",{class:"token function"},"mount"),(0,s.Uk)(" /dev/sdxn /mnt\n"),(0,s.Wm)("span",{class:"token function"},"mkdir"),(0,s.Uk)(" /mnt/home "),(0,s.Wm)("span",{class:"token comment"},"# 若 /home 目录单独分区"),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token function"},"mount"),(0,s.Uk)(" /dev/sdxn /mnt/home "),(0,s.Wm)("span",{class:"token comment"},"# 若 /home 目录单独分区"),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token function"},"mkdir"),(0,s.Uk)(" -p /mnt/boot/efi\n"),(0,s.Wm)("span",{class:"token function"},"mount"),(0,s.Uk)(" /dev/sdxn /mnt/boot/efi\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"2"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"3"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"4"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"5"),(0,s.Wm)("br")])],-1),K=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Wm)("span",{class:"token function"},"mount"),(0,s.Uk)(" /dev/nvmexn1pn /mnt\n"),(0,s.Wm)("span",{class:"token function"},"mkdir"),(0,s.Uk)(" /mnt/home "),(0,s.Wm)("span",{class:"token comment"},"# 若 /home 目录单独分区"),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token function"},"mount"),(0,s.Uk)(" /dev/nvmexn1pn /mnt/home "),(0,s.Wm)("span",{class:"token comment"},"# 若 /home 目录单独分区"),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token function"},"mkdir"),(0,s.Uk)(" -p /mnt/boot/efi\n"),(0,s.Wm)("span",{class:"token function"},"mount"),(0,s.Uk)(" /dev/nvmexn1pn /mnt/boot/efi\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"2"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"3"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"4"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"5"),(0,s.Wm)("br")])],-1),Q=(0,s.Wm)("h3",{id:"🆕-全新安装"},[(0,s.Wm)("a",{class:"header-anchor",href:"#🆕-全新安装"},"#"),(0,s.Uk)(" 🆕 全新安装")],-1),$=(0,s.Uk)("若为全新安装（单 archlinux 系统），首先要对磁盘建立新的 GPT 分区表；同时，由于没有现存的 EFI 分区，所以我们还需要手动创建它（这一步在 "),ll=(0,s.Uk)("7. 分区和格式化（使用 Btrfs 文件系统）"),nl=(0,s.Uk)(" 步骤之前）："),el=(0,s.Wm)("h4",{id:"_1-建立新的-gpt-分区表"},[(0,s.Wm)("a",{class:"header-anchor",href:"#_1-建立新的-gpt-分区表"},"#"),(0,s.Uk)(" 1. 建立新的 GPT 分区表")],-1),sl=(0,s.Wm)("ol",null,[(0,s.Wm)("li",null,[(0,s.Uk)("同样的，先通过 "),(0,s.Wm)("code",null,"lsblk"),(0,s.Uk)(" 命令，区分要全新安装 archlinux 的磁盘（通过观察磁盘的大小等判断）：")])],-1),ml=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Uk)("lsblk "),(0,s.Wm)("span",{class:"token comment"},"# 显示当前分区情况"),(0,s.Uk)("\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br")])],-1),al=(0,s.Wm)("ol",{start:"2"},[(0,s.Wm)("li",null,[(0,s.Uk)("通过以下命令将磁盘转换为 "),(0,s.Wm)("code",null,"gpt"),(0,s.Uk)(" 类型：")])],-1),tl=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Wm)("span",{class:"token function"},"parted"),(0,s.Uk)(" /dev/sdx "),(0,s.Wm)("span",{class:"token comment"},"# 执行 parted，进行磁盘类型变更"),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token punctuation"},"("),(0,s.Uk)("parted"),(0,s.Wm)("span",{class:"token punctuation"},")"),(0,s.Uk)("mktable "),(0,s.Wm)("span",{class:"token comment"},"# 输入 mktable"),(0,s.Uk)("\nNew disk label type? gpt "),(0,s.Wm)("span",{class:"token comment"},"# 输入 gpt，将磁盘类型转换为 GPT 类型。如磁盘有数据会警告，输入 yes 即可"),(0,s.Uk)("\nquit "),(0,s.Wm)("span",{class:"token comment"},"# 退出 parted 命令行交互"),(0,s.Uk)("\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"2"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"3"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"4"),(0,s.Wm)("br")])],-1),Wl=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Wm)("span",{class:"token function"},"parted"),(0,s.Uk)(" /dev/nvmexn1 "),(0,s.Wm)("span",{class:"token comment"},"# 执行 parted，进行磁盘类型变更"),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token punctuation"},"("),(0,s.Uk)("parted"),(0,s.Wm)("span",{class:"token punctuation"},")"),(0,s.Uk)("mktable "),(0,s.Wm)("span",{class:"token comment"},"# 输入 mktable"),(0,s.Uk)("\nNew disk label type? gpt "),(0,s.Wm)("span",{class:"token comment"},"# 输入 gpt，将磁盘类型转换为 GPT 类型。如磁盘有数据会警告，输入 yes 即可"),(0,s.Uk)("\nquit "),(0,s.Wm)("span",{class:"token comment"},"# 退出 parted 命令行交互"),(0,s.Uk)("\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"2"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"3"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"4"),(0,s.Wm)("br")])],-1),cl=(0,s.Wm)("div",{class:"custom-container danger"},[(0,s.Wm)("p",{class:"custom-container-title"},"☢️ 警告"),(0,s.Wm)("p",null,"重建分区表会使磁盘所有数据丢失，请事先确认。")],-1),ol=(0,s.Wm)("h4",{id:"_2-建立-efi-分区"},[(0,s.Wm)("a",{class:"header-anchor",href:"#_2-建立-efi-分区"},"#"),(0,s.Uk)(" 2. 建立 EFI 分区")],-1),ul=(0,s.Uk)("进入 "),il=(0,s.Wm)("code",null,"cfdisk",-1),rl=(0,s.Uk)(" 分区工具之后，类似上一节步骤 "),dl=(0,s.Uk)("7-1. 分区"),kl=(0,s.Uk)(" 的分区说明，建立 EFI 分区："),pl=(0,s.uE)("<li><p>选中 <code>Free space</code> &gt; 再选中操作 <code>[New]</code> &gt; 然后按下回车 <code>Enter</code> 以新建 <code>EFI</code> 分区</p></li><li><p>输入 <code>分区大小</code>（建议 &gt;= <code>256MB</code>、&lt;= <code>1024MB</code>；推荐 <code>512MB</code>）&gt; 然后按下回车 <code>Enter</code></p></li><li><p>选中操作 <code>[Type]</code> &gt; 然后按下回车 <code>Enter</code> &gt; 通过方向键 <code>↑</code> 和 <code>↓</code> 选中 <code>EFI System</code> &gt; 最后按下回车 <code>Enter</code></p></li>",3),bl=(0,s.Uk)("接下来可以按照上一节 "),Ul=(0,s.Uk)("7-1. 分区"),hl=(0,s.Uk)(" 的步骤创建其它分区"),fl=(0,s.Wm)("h4",{id:"_3-格式化-efi-分区"},[(0,s.Wm)("a",{class:"header-anchor",href:"#_3-格式化-efi-分区"},"#"),(0,s.Uk)(" 3. 格式化 EFI 分区")],-1),gl=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,"mkfs.vfat /dev/sdxn\n")]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br")])],-1),vl=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,"mkfs.vfat /dev/nvmexn1pn\n")]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br")])],-1),wl=(0,s.Wm)("h3",{id:"💾-swap-分区和-swap-文件"},[(0,s.Wm)("a",{class:"header-anchor",href:"#💾-swap-分区和-swap-文件"},"#"),(0,s.Uk)(" 💾 Swap 分区和 Swap 文件")],-1),_l=(0,s.Wm)("p",null,"如果希望使用 Swap 文件替换 Swap 分区，那么在分区和挂载中不必创建和开启 Swap 分区。",-1),El=(0,s.Wm)("div",{class:"custom-container tip"},[(0,s.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示"),(0,s.Wm)("p",null,[(0,s.Uk)("但是，使用 Swap 文件会更加复杂。因为若使用 Swap 文件在 "),(0,s.Wm)("code",null,"Btrfs"),(0,s.Uk)(" 文件系统中设置休眠（hibernate）的时候需要额外的步骤，而且可能有兼容性问题。若没有动态改变 Swap 大小的需求，建议使用 Swap 分区。")])],-1),Bl=(0,s.Uk)("通过以下步骤创建和挂载 Swap 文件（这一步在 "),xl=(0,s.Uk)("18. 完成安装"),Al=(0,s.Uk)(" 步骤之后）："),Sl=(0,s.Wm)("ol",null,[(0,s.Wm)("li",null,"通过以下命令创建 Swap File：")],-1),Cl=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Wm)("span",{class:"token function"},"sudo"),(0,s.Uk)(),(0,s.Wm)("span",{class:"token function"},"dd"),(0,s.Uk)(),(0,s.Wm)("span",{class:"token assign-left variable"},"if"),(0,s.Wm)("span",{class:"token operator"},"="),(0,s.Uk)("/dev/zero "),(0,s.Wm)("span",{class:"token assign-left variable"},"of"),(0,s.Wm)("span",{class:"token operator"},"="),(0,s.Uk)("/swapfile "),(0,s.Wm)("span",{class:"token assign-left variable"},"bs"),(0,s.Wm)("span",{class:"token operator"},"="),(0,s.Uk)("1M "),(0,s.Wm)("span",{class:"token assign-left variable"},"count"),(0,s.Wm)("span",{class:"token operator"},"="),(0,s.Wm)("span",{class:"token number"},"16384"),(0,s.Uk)(),(0,s.Wm)("span",{class:"token assign-left variable"},"status"),(0,s.Wm)("span",{class:"token operator"},"="),(0,s.Uk)("progress "),(0,s.Wm)("span",{class:"token comment"},"# 创建 16G 的交换空间（大小 >= 电脑实际运行内存的 60%）"),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token function"},"sudo"),(0,s.Uk)(),(0,s.Wm)("span",{class:"token function"},"chmod"),(0,s.Uk)(),(0,s.Wm)("span",{class:"token number"},"600"),(0,s.Uk)(" /swapfile "),(0,s.Wm)("span",{class:"token comment"},"# 设置正确的权限"),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token function"},"sudo"),(0,s.Uk)(),(0,s.Wm)("span",{class:"token function"},"mkswap"),(0,s.Uk)(" /swapfile "),(0,s.Wm)("span",{class:"token comment"},"# 格式化 Swap 文件"),(0,s.Uk)("\n"),(0,s.Wm)("span",{class:"token function"},"sudo"),(0,s.Uk)(),(0,s.Wm)("span",{class:"token function"},"swapon"),(0,s.Uk)(" /swapfile "),(0,s.Wm)("span",{class:"token comment"},"# 挂载 Swap 文件"),(0,s.Uk)("\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"2"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"3"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"4"),(0,s.Wm)("br")])],-1),Fl=(0,s.Wm)("ol",{start:"2"},[(0,s.Wm)("li",null,"通过以下命令挂载 Swap 文件：")],-1),Gl=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Wm)("span",{class:"token function"},"swapon"),(0,s.Uk)(" /swapfile\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br")])],-1),Il=(0,s.Wm)("ol",{start:"3"},[(0,s.Wm)("li",null,[(0,s.Uk)("使用 "),(0,s.Wm)("code",null,"free"),(0,s.Uk)(" 命令复查 Swap 文件挂载情况：")])],-1),Nl=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Wm)("span",{class:"token function"},"free"),(0,s.Uk)(" -h "),(0,s.Wm)("span",{class:"token comment"},"# -h 选项会使输出以人类可读的单位显示"),(0,s.Uk)("\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br")])],-1),Tl=(0,s.Wm)("ol",{start:"4"},[(0,s.Wm)("li",null,[(0,s.Uk)("最后，向 "),(0,s.Wm)("code",null,"/etc/fstab"),(0,s.Uk)(" 中追加如下内容：")])],-1),Rl=(0,s.Wm)("div",{class:"language-fstab ext-fstab line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-fstab"},[(0,s.Wm)("code",null,"/swapfile  none  swap  defaults  0 0\n")]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br")])],-1),Ml=(0,s.Wm)("h2",{id:"💽-安装环境和新系统的关系"},[(0,s.Wm)("a",{class:"header-anchor",href:"#💽-安装环境和新系统的关系"},"#"),(0,s.Uk)(" 💽 安装环境和新系统的关系")],-1),Ll=(0,s.Wm)("blockquote",null,[(0,s.Wm)("p",null,"理解安装环境和新系统的关系，对于理解 archlinux 安装时所做的步骤具有重大意义。可以说，理解了它们的关系基本上就理解了 archlinux 的安装")],-1),Dl=(0,s.Wm)("p",null,"为了生动形象的理解安装环境和新系统的关系，我们可以将安装系统的过程想象成搬家 🏠。",-1),yl=(0,s.Wm)("h3",{id:"_1-🏠-建房子"},[(0,s.Wm)("a",{class:"header-anchor",href:"#_1-🏠-建房子"},"#"),(0,s.Uk)(" 1. 🏠 建房子")],-1),ql=(0,s.Uk)("我们可以将安装环境比喻成一个临时的家。为了住进新家，我们需要先把新家的房子建起来。这个过程就是 "),Pl=(0,s.Uk)("7. 分区和格式化"),Yl=(0,s.Uk)("。在磁盘上建立新的分区并格式化，就好比在空余的土地上建立起新的房子。"),Vl=(0,s.Wm)("h3",{id:"_2-🛣️-建立通道"},[(0,s.Wm)("a",{class:"header-anchor",href:"#_2-🛣️-建立通道"},"#"),(0,s.Uk)(" 2. 🛣️ 建立通道")],-1),Ol=(0,s.Uk)("新房建好了，我们首先还要建立一条联通旧家和新家之间的通道 —— 不然我们怎么走到新家去呢！更不要提将家具什么的安置到新家去了。这个步骤就是 "),Xl=(0,s.Uk)("8. 挂载"),zl=(0,s.Uk)("。通过将新的分区挂载到 "),Zl=(0,s.Wm)("code",null,"/mnt",-1),jl=(0,s.Uk)(" 下，我们才能对新的分区进行操作。"),Hl=(0,s.Wm)("h3",{id:"_3-🛋️-添置家具"},[(0,s.Wm)("a",{class:"header-anchor",href:"#_3-🛋️-添置家具"},"#"),(0,s.Uk)(" 3. 🛋️ 添置家具")],-1),Jl=(0,s.Uk)("光有一个空荡荡的房子是没有用的。为了变成一个能够生活的温馨小窝，我们还需要添置家具。这个步骤就是 "),Kl=(0,s.Uk)("9. 安装系统"),Ql=(0,s.Uk)("。在执行 "),$l=(0,s.Wm)("code",null,"pacstrap",-1),ln=(0,s.Uk)(" 脚本的过程中，其实就是将系统运行需要的一些基础的东西安装到新的系统中 —— 类似把家具放到新的家里。"),nn=(0,s.Wm)("h3",{id:"_4-🚚-搬进新家"},[(0,s.Wm)("a",{class:"header-anchor",href:"#_4-🚚-搬进新家"},"#"),(0,s.Uk)(" 4. 🚚 搬进新家")],-1),en=(0,s.Uk)("最后，新家建好了，装修啊、家具啊也弄好了，我们可以搬进新家了！这一步骤就是 "),sn=(0,s.Uk)("11. change root"),mn=(0,s.Uk)("。"),an=(0,s.Wm)("code",null,"arch-chroot",-1),tn=(0,s.Uk)(" 脚本是软件包 "),Wn={href:"https://archlinux.org/packages/?name=arch-install-scripts",target:"_blank",rel:"noopener noreferrer"},cn=(0,s.Wm)("code",null,"arch-install-scripts",-1),on=(0,s.Uk)(" 的一部分，但本质上只是在 "),un=(0,s.Wm)("code",null,"chroot",-1),rn=(0,s.Uk)(" 命令的基础上添加了一些功能，简化了“搬家”的流程。其类似（注意，只是类似，"),dn=(0,s.Wm)("code",null,"arch-chroot",-1),kn=(0,s.Uk)(" 还会做一些其它的工作，安装时请使用 "),pn=(0,s.Wm)("code",null,"arch-chroot",-1),bn=(0,s.Uk)("）以下命令："),Un=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Wm)("span",{class:"token function"},"mount"),(0,s.Uk)(" -t proc none /mnt/proc\n"),(0,s.Wm)("span",{class:"token function"},"mount"),(0,s.Uk)(" -t sysfs none /mnt/sys\n"),(0,s.Wm)("span",{class:"token function"},"mount"),(0,s.Uk)(" -o "),(0,s.Wm)("span",{class:"token builtin class-name"},"bind"),(0,s.Uk)(" /dev /mnt/dev\n"),(0,s.Wm)("span",{class:"token function"},"chroot"),(0,s.Uk)(" /mnt "),(0,s.Wm)("span",{class:"token function"},"bash"),(0,s.Uk)("\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"2"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"3"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"4"),(0,s.Wm)("br")])],-1),hn=(0,s.Wm)("p",null,[(0,s.Wm)("code",null,"chroot"),(0,s.Uk)(" 顾名思义，就是 "),(0,s.Wm)("strong",null,"ch"),(0,s.Uk)("ange "),(0,s.Wm)("strong",null,"root"),(0,s.Uk)(" 的意思。"),(0,s.Wm)("code",null,"chroot"),(0,s.Uk)(" 命令把根目录换成指定的目录。通常，切换根目录一般的目的是为了系统维护，例如重装引导程序或者重置遗忘的密码；而在安装时则是为了安装（大雾 🌫️。在安装过程中，新的根目录就是 "),(0,s.Wm)("code",null,"/mnt"),(0,s.Uk)("。这个过程就好比从原来的家搬到了新的家一样，是不是这样理解起来就简单一点了呢？")],-1),fn=(0,s.Wm)("h2",{id:"🥙-杂七杂八"},[(0,s.Wm)("a",{class:"header-anchor",href:"#🥙-杂七杂八"},"#"),(0,s.Uk)(" 🥙 杂七杂八")],-1),gn=(0,s.Wm)("p",null,"其它琐碎的问题不在一一展开叙述，这里通过列表统一说明：",-1),vn=(0,s.Wm)("li",null,[(0,s.Uk)("EFI 分区（又称 esp 分区）不一定要在 "),(0,s.Wm)("code",null,"/boot/efi"),(0,s.Uk)(" 目录下；也可以是 "),(0,s.Wm)("code",null,"/boot"),(0,s.Uk)(" 或者 "),(0,s.Wm)("code",null,"/efi"),(0,s.Uk)(" 等等（若为 "),(0,s.Wm)("code",null,"/boot"),(0,s.Uk)(" 则 "),(0,s.Wm)("code",null,"/boot"),(0,s.Uk)(" 目录中的文件会和 EFI 分区的文件混杂在一起）")],-1),wn=(0,s.Uk)("若为"),_n=(0,s.Wm)("strong",null,"联想小新 Pro14 / YOGA 14s 2021",-1),En=(0,s.Uk)(" 机型，发现安装前后键盘都无法正常工作。此时安装时请使用外接键盘。为了解决该问题，在 "),Bn=(0,s.Uk)("17. 安装引导程序"),xn=(0,s.Uk)(" 步骤中编辑 "),An=(0,s.Wm)("code",null,"/etc/default/grub",-1),Sn=(0,s.Uk)(" 文件时添加额外的 GRUB 参数 —— 在 "),Cn=(0,s.Wm)("code",null,"GRUB_CMDLINE_LINUX_DEFAULT",-1),Fn=(0,s.Uk)(" 这一行中添加参数 "),Gn=(0,s.Wm)("code",null,"i8042.dumbkbd",-1),In=(0,s.Wm)("p",null,"修改后复查：",-1),Nn=(0,s.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-bash"},[(0,s.Wm)("code",null,[(0,s.Wm)("span",{class:"token function"},"head"),(0,s.Uk)(" /etc/default/grub\n")])]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br")])],-1),Tn=(0,s.Wm)("p",null,"输出如下：",-1),Rn=(0,s.Wm)("div",{class:"language-grub ext-grub line-numbers-mode"},[(0,s.Wm)("pre",{class:"language-grub"},[(0,s.Wm)("code",null,'# GRUB boot loader configuration\n\nGRUB_DEFAULT_SUBMENU=y\nGRUB_DEFAULT=saved\nGRUB_SAVEDEFAULT=true\nGRUB_TIMEOUT=2\nGRUB_DISTRIBUTOR="Arch"\nGRUB_CMDLINE_LINUX_DEFAULT="loglevel=5 nowatchdog i8042.dumbkbd"\nGRUB_CMDLINE_LINUX=""\n')]),(0,s.Wm)("div",{class:"highlight-lines"},[(0,s.Wm)("br"),(0,s.Wm)("br"),(0,s.Wm)("br"),(0,s.Wm)("br"),(0,s.Wm)("br"),(0,s.Wm)("br"),(0,s.Wm)("br"),(0,s.Wm)("div",{class:"highlight-line"}," "),(0,s.Wm)("br")]),(0,s.Wm)("div",{class:"line-numbers"},[(0,s.Wm)("span",{class:"line-number"},"1"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"2"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"3"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"4"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"5"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"6"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"7"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"8"),(0,s.Wm)("br"),(0,s.Wm)("span",{class:"line-number"},"9"),(0,s.Wm)("br")])],-1),Mn={render:function(l,n){const e=(0,s.up)("RouterLink"),m=(0,s.up)("CodeGroupItem"),Mn=(0,s.up)("CodeGroup"),Ln=(0,s.up)("OutboundLink");return(0,s.wg)(),(0,s.j4)(s.HY,null,[a,(0,s.Wm)("blockquote",null,[t,(0,s.Wm)("p",null,[W,(0,s.Wm)(e,{to:"/rookie/basic-install.html"},{default:(0,s.w5)((()=>[c])),_:1}),o]),u]),(0,s.Wm)("blockquote",null,[i,(0,s.Wm)("nav",r,[(0,s.Wm)("ul",null,[(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#🔭-知其然-知其所以然"},{default:(0,s.w5)((()=>[d])),_:1})]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#🔖-这一节将会讨论"},{default:(0,s.w5)((()=>[k])),_:1})]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#💾-分区和格式化"},{default:(0,s.w5)((()=>[p])),_:1}),(0,s.Wm)("ul",null,[(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#💾-为什么要用-btrfs-文件系统"},{default:(0,s.w5)((()=>[b])),_:1})]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#💾-传统-ext4-文件系统说明"},{default:(0,s.w5)((()=>[U])),_:1})]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#🆕-全新安装"},{default:(0,s.w5)((()=>[h])),_:1})]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#💾-swap-分区和-swap-文件"},{default:(0,s.w5)((()=>[f])),_:1})])])]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#💽-安装环境和新系统的关系"},{default:(0,s.w5)((()=>[g])),_:1}),(0,s.Wm)("ul",null,[(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#_1-🏠-建房子"},{default:(0,s.w5)((()=>[v])),_:1})]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#_2-🛣️-建立通道"},{default:(0,s.w5)((()=>[w])),_:1})]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#_3-🛋️-添置家具"},{default:(0,s.w5)((()=>[_])),_:1})]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#_4-🚚-搬进新家"},{default:(0,s.w5)((()=>[E])),_:1})])])]),(0,s.Wm)("li",null,[(0,s.Wm)(e,{to:"#🥙-杂七杂八"},{default:(0,s.w5)((()=>[B])),_:1})])])])]),x,A,S,C,F,G,I,(0,s.Wm)("div",N,[T,(0,s.Wm)("p",null,[R,(0,s.Wm)(e,{to:"/advanced/btrfs.html"},{default:(0,s.w5)((()=>[M])),_:1}),L])]),D,y,q,(0,s.Wm)("p",null,[P,Y,V,(0,s.Wm)(e,{to:"/rookie/basic-install.html#_7-1-%E5%88%86%E5%8C%BA"},{default:(0,s.w5)((()=>[O])),_:1}),X]),z,(0,s.Wm)(Mn,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"SATA"},{default:(0,s.w5)((()=>[Z])),_:1}),(0,s.Wm)(m,{title:"NVME"},{default:(0,s.w5)((()=>[j])),_:1})])),_:1}),H,(0,s.Wm)(Mn,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"SATA"},{default:(0,s.w5)((()=>[J])),_:1}),(0,s.Wm)(m,{title:"NVME"},{default:(0,s.w5)((()=>[K])),_:1})])),_:1}),Q,(0,s.Wm)("p",null,[$,(0,s.Wm)(e,{to:"/rookie/basic-install.html#_7-%E5%88%86%E5%8C%BA%E5%92%8C%E6%A0%BC%E5%BC%8F%E5%8C%96-%E4%BD%BF%E7%94%A8-btrfs-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"},{default:(0,s.w5)((()=>[ll])),_:1}),nl]),el,sl,ml,al,(0,s.Wm)(Mn,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"SATA"},{default:(0,s.w5)((()=>[tl])),_:1}),(0,s.Wm)(m,{title:"NVME"},{default:(0,s.w5)((()=>[Wl])),_:1})])),_:1}),cl,ol,(0,s.Wm)("p",null,[ul,il,rl,(0,s.Wm)(e,{to:"/rookie/basic-install.html#_7-1-%E5%88%86%E5%8C%BA"},{default:(0,s.w5)((()=>[dl])),_:1}),kl]),(0,s.Wm)("ol",null,[pl,(0,s.Wm)("li",null,[(0,s.Wm)("p",null,[bl,(0,s.Wm)(e,{to:"/rookie/basic-install.html#_7-1-%E5%88%86%E5%8C%BA"},{default:(0,s.w5)((()=>[Ul])),_:1}),hl])])]),fl,(0,s.Wm)(Mn,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{title:"SATA"},{default:(0,s.w5)((()=>[gl])),_:1}),(0,s.Wm)(m,{title:"NVME"},{default:(0,s.w5)((()=>[vl])),_:1})])),_:1}),wl,_l,El,(0,s.Wm)("p",null,[Bl,(0,s.Wm)(e,{to:"/rookie/basic-install.html#_18-%E5%AE%8C%E6%88%90%E5%AE%89%E8%A3%85"},{default:(0,s.w5)((()=>[xl])),_:1}),Al]),Sl,Cl,Fl,Gl,Il,Nl,Tl,Rl,Ml,Ll,Dl,yl,(0,s.Wm)("p",null,[ql,(0,s.Wm)(e,{to:"/rookie/basic-install.html#_7-%E5%88%86%E5%8C%BA%E5%92%8C%E6%A0%BC%E5%BC%8F%E5%8C%96-%E4%BD%BF%E7%94%A8-btrfs-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"},{default:(0,s.w5)((()=>[Pl])),_:1}),Yl]),Vl,(0,s.Wm)("p",null,[Ol,(0,s.Wm)(e,{to:"/rookie/basic-install.html#_8-%E6%8C%82%E8%BD%BD"},{default:(0,s.w5)((()=>[Xl])),_:1}),zl,Zl,jl]),Hl,(0,s.Wm)("p",null,[Jl,(0,s.Wm)(e,{to:"/rookie/basic-install.html#_9-%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F"},{default:(0,s.w5)((()=>[Kl])),_:1}),Ql,$l,ln]),nn,(0,s.Wm)("p",null,[en,(0,s.Wm)(e,{to:"/rookie/basic-install.html#_11-change-root"},{default:(0,s.w5)((()=>[sn])),_:1}),mn,an,tn,(0,s.Wm)("a",Wn,[cn,(0,s.Wm)(Ln)]),on,un,rn,dn,kn,pn,bn]),Un,hn,fn,gn,(0,s.Wm)("ol",null,[vn,(0,s.Wm)("li",null,[wn,_n,En,(0,s.Wm)(e,{to:"/basic-install.html#_17-%E5%AE%89%E8%A3%85%E5%BC%95%E5%AF%BC%E7%A8%8B%E5%BA%8F"},{default:(0,s.w5)((()=>[Bn])),_:1}),xn,An,Sn,Cn,Fn,Gn])]),In,Nn,Tn,Rn],64)}}},1834:(l,n,e)=>{"use strict";e.d(n,{Z:()=>s});const s=e.p+"assets/img/btrfs-logo.659fa8d1.svg"}}]);