(self.webpackChunkarch_guide=self.webpackChunkarch_guide||[]).push([[16],{4779:(n,l,s)=>{"use strict";s.r(l),s.d(l,{data:()=>e});const e={key:"v-67d837ff",path:"/advanced/make-install-disk.html",title:"制作系统盘",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"🥀 落红不是无情物，化作春泥更护花",slug:"🥀-落红不是无情物-化作春泥更护花",children:[]},{level:3,title:"🔖 这一节将会讨论：",slug:"🔖-这一节将会讨论",children:[]},{level:2,title:"通用方法",slug:"通用方法",children:[{level:3,title:"ventoy",slug:"ventoy",children:[]},{level:3,title:"balenaEtcher",slug:"balenaetcher",children:[]}]},{level:2,title:"手动制作",slug:"手动制作",children:[{level:3,title:"dd 命令",slug:"dd-命令",children:[]},{level:3,title:"win10 / win11 安装盘",slug:"win10-win11-安装盘",children:[]}]}],filePathRelative:"advanced/make-install-disk.md",git:{updatedTime:1624526576e3,contributors:[{name:"icekylin",email:"wminid@yeah.net",commits:1}]}}},154:(n,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>$});var e=s(6252);const a=s.p+"assets/img/win-1.5b30ed41.png",m=s.p+"assets/img/win-2.cd77652c.png",t=s.p+"assets/img/win-3.2ab7d26d.png",i=s.p+"assets/img/win-4.17f521cc.png",c=s.p+"assets/img/win-5.301a46fd.png",u=s.p+"assets/img/win-6.0c5ab2df.png",o=s.p+"assets/img/win-7.6960b07c.png",W=s.p+"assets/img/win-8.d0a1e6cd.png",d=(0,e.Wm)("h1",{id:"制作系统盘"},[(0,e.Wm)("a",{class:"header-anchor",href:"#制作系统盘"},"#"),(0,e.Uk)(" 制作系统盘")],-1),r=(0,e.Wm)("blockquote",null,[(0,e.Wm)("h3",{id:"🥀-落红不是无情物-化作春泥更护花"},[(0,e.Wm)("a",{class:"header-anchor",href:"#🥀-落红不是无情物-化作春泥更护花"},"#"),(0,e.Uk)(" 🥀 落红不是无情物，化作春泥更护花")]),(0,e.Wm)("p",null,"本节介绍在 archlinux 下如何制作系统安装盘（启动盘）")],-1),p=(0,e.Wm)("h3",{id:"🔖-这一节将会讨论"},[(0,e.Wm)("a",{class:"header-anchor",href:"#🔖-这一节将会讨论"},"#"),(0,e.Uk)(" 🔖 这一节将会讨论：")],-1),k={class:"table-of-contents"},h=(0,e.Uk)("🥀 落红不是无情物，化作春泥更护花"),b=(0,e.Uk)("🔖 这一节将会讨论："),g=(0,e.Uk)("通用方法"),U=(0,e.Uk)("ventoy"),f=(0,e.Uk)("balenaEtcher"),w=(0,e.Uk)("手动制作"),v=(0,e.Uk)("dd 命令"),_=(0,e.Uk)("win10 / win11 安装盘"),x=(0,e.uE)('<h2 id="通用方法"><a class="header-anchor" href="#通用方法">#</a> 通用方法</h2><h3 id="ventoy"><a class="header-anchor" href="#ventoy">#</a> ventoy</h3><h3 id="balenaetcher"><a class="header-anchor" href="#balenaetcher">#</a> balenaEtcher</h3><h2 id="手动制作"><a class="header-anchor" href="#手动制作">#</a> 手动制作</h2><h3 id="dd-命令"><a class="header-anchor" href="#dd-命令">#</a> dd 命令</h3><h3 id="win10-win11-安装盘"><a class="header-anchor" href="#win10-win11-安装盘">#</a> win10 / win11 安装盘</h3><p>以往在 Linux 下手动制作一个 win10 / win11 安装盘还是很简单的，但是随着近几年微软的更新，其 iso 安装镜像中存在一个名为<code>install.wim</code>的文件，其大小已经超出了 4GB（fat32 要求的单个文件最大 4GB）的限制。这使得必须用额外的步骤才能制作一个启动盘。</p><p>这里依旧使用 fat32 格式是因为其兼容性是最好的，NTFS 的 UEFI 安装盘很多情况下不被识别。</p>',8),y=(0,e.Wm)("p",null,[(0,e.Uk)("首先用 "),(0,e.Wm)("code",null,"parted"),(0,e.Uk)(" 命令创建 U 盘的分区。"),(0,e.Wm)("code",null,"label type"),(0,e.Uk)(" 输入 "),(0,e.Wm)("code",null,"gpt"),(0,e.Uk)("：")],-1),E=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"parted"),(0,e.Uk)(" /dev/sdx "),(0,e.Wm)("span",{class:"token comment"},"# 执行 parted，进行磁盘类型变更"),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token punctuation"},"("),(0,e.Uk)("parted"),(0,e.Wm)("span",{class:"token punctuation"},")"),(0,e.Uk)(" mktable "),(0,e.Wm)("span",{class:"token comment"},"# 输入 mktable"),(0,e.Uk)("\n新的磁盘卷标类型？ gpt "),(0,e.Wm)("span",{class:"token comment"},"# 输入 gpt，将磁盘类型转换为 GPT 类型。如磁盘有数据会警告，输入 Yes 即可"),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token punctuation"},"("),(0,e.Uk)("parted"),(0,e.Wm)("span",{class:"token punctuation"},")"),(0,e.Uk)(" quit "),(0,e.Wm)("span",{class:"token comment"},"# 退出 parted 命令行交互"),(0,e.Uk)("\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"4"),(0,e.Wm)("br")])],-1),B=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:a,alt:"win-1"})],-1),C=(0,e.Wm)("div",{class:"custom-container danger"},[(0,e.Wm)("p",{class:"custom-container-title"},"☢️ 警告"),(0,e.Wm)("p",null,"重建分区表会使 U 盘所有数据丢失，请事先确认。")],-1),G={class:"custom-container tip"},T=(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示",-1),q=(0,e.Uk)("也可以使用图形化的分区工具如 "),F={href:"https://apps.kde.org/partitionmanager/",target:"_blank",rel:"noopener noreferrer"},L=(0,e.Uk)("KDE 分区管理器"),S=(0,e.Uk)("。"),z=(0,e.Uk)("接下来类似 "),A=(0,e.Uk)("7-1. 分区"),D=(0,e.Uk)("，用 "),I=(0,e.Wm)("code",null,"cfdisk",-1),N=(0,e.Uk)(" 命令创建新分区。在 "),O=(0,e.Wm)("code",null,"Type",-1),P=(0,e.Uk)(" 中选择 "),R=(0,e.Wm)("code",null,"Microsoft 基本数据",-1),Y=(0,e.Uk)("："),j=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"cfdisk"),(0,e.Uk)(" /dev/sdx\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),H=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:m,alt:"win-2"})],-1),K=(0,e.Wm)("li",null,[(0,e.Wm)("p",null,[(0,e.Uk)("接下来使用 "),(0,e.Wm)("code",null,"mkfs.vfat"),(0,e.Uk)(" 命令格式化所创建的分区，这样 U 盘就准备好了：")]),(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" mkfs.vfat /dev/sdxn\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])]),(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:t,alt:"win-3"})])],-1),M=(0,e.Wm)("li",null,[(0,e.Wm)("p",null,"接下来下载 win10 / win11 的 iso 镜像并解压。由于 Ark 尚不支持 UDF 文件系统的 ISO 文件，我们需要手动挂载并将其中的内容复制出来："),(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:i,alt:"win-4"})]),(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"mount"),(0,e.Uk)(" -o loop /path/of/windows_iso_name.iso /mnt/mount_point\n"),(0,e.Wm)("span",{class:"token function"},"cp"),(0,e.Uk)(" -a /mnt/mount_point /path/of/some_folder\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br")])]),(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:c,alt:"win-5"})])],-1),J=(0,e.Wm)("li",null,[(0,e.Wm)("p",null,[(0,e.Uk)("得到复制出来的文件后，最后要进行的就是压缩 "),(0,e.Wm)("code",null,"install.wim"),(0,e.Uk)(" 文件（在 "),(0,e.Wm)("code",null,"sources"),(0,e.Uk)(" 文件夹下）。这里需要首先安装一个包 "),(0,e.Wm)("code",null,"wimlib"),(0,e.Uk)("（可能已经作为依赖安装了）：")]),(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" pacman -S wimlib\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])])],-1),Q=(0,e.Wm)("li",null,[(0,e.Wm)("p",null,"接下来进行压缩。这一步会持续较长时间，耐心等待。完成后可以看到文件已经被压缩到了 3.x GB："),(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token builtin class-name"},"cd"),(0,e.Uk)(" /path/of/some_folder/sources\n"),(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" wimlib-imagex optimize install.wim --solid\n"),(0,e.Wm)("span",{class:"token function"},"ls"),(0,e.Uk)(" -hl install.wim\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br")])]),(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:u,alt:"win-6"})])],-1),V=(0,e.Wm)("li",null,[(0,e.Wm)("p",null,"最后把全部文件复制到 U 盘中即可："),(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"umount"),(0,e.Uk)(" /mnt/mount_point "),(0,e.Wm)("span",{class:"token comment"},"# 卸载掉镜像"),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"mount"),(0,e.Uk)(" /dev/sdxn /mnt/mount_point "),(0,e.Wm)("span",{class:"token comment"},"# 挂载 U 盘"),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"cp"),(0,e.Uk)(" -r /path/of/some_folder/* /mnt/media "),(0,e.Wm)("span",{class:"token comment"},"# 复制全部文件"),(0,e.Uk)("\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br")])]),(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:o,alt:"win-7"})])],-1),X=(0,e.Wm)("li",null,[(0,e.Wm)("p",null,"复查一下并卸载 U 盘："),(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"ls"),(0,e.Uk)(" -hl /mnt/mount_point "),(0,e.Wm)("span",{class:"token comment"},"# 复查一下"),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"umount"),(0,e.Uk)(" /mnt/mount_point "),(0,e.Wm)("span",{class:"token comment"},"# 卸载 U 盘"),(0,e.Uk)("\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br")])]),(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:W,alt:"win-8"})])],-1),Z=(0,e.Wm)("p",null,"自此，一个 win10 / win11 安装盘便制作完成了。",-1),$={render:function(n,l){const s=(0,e.up)("RouterLink"),a=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.j4)(e.HY,null,[d,r,(0,e.Wm)("blockquote",null,[p,(0,e.Wm)("nav",k,[(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#🥀-落红不是无情物-化作春泥更护花"},{default:(0,e.w5)((()=>[h])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#🔖-这一节将会讨论"},{default:(0,e.w5)((()=>[b])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#通用方法"},{default:(0,e.w5)((()=>[g])),_:1}),(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#ventoy"},{default:(0,e.w5)((()=>[U])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#balenaetcher"},{default:(0,e.w5)((()=>[f])),_:1})])])]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#手动制作"},{default:(0,e.w5)((()=>[w])),_:1}),(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#dd-命令"},{default:(0,e.w5)((()=>[v])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#win10-win11-安装盘"},{default:(0,e.w5)((()=>[_])),_:1})])])])])])]),x,(0,e.Wm)("ol",null,[(0,e.Wm)("li",null,[y,E,B,C,(0,e.Wm)("div",G,[T,(0,e.Wm)("p",null,[q,(0,e.Wm)("a",F,[L,(0,e.Wm)(a)]),S])])]),(0,e.Wm)("li",null,[(0,e.Wm)("p",null,[z,(0,e.Wm)(s,{to:"/rookie/basic-install.html#_7-1-%E5%88%86%E5%8C%BA"},{default:(0,e.w5)((()=>[A])),_:1}),D,I,N,O,P,R,Y]),j,H]),K,M,J,Q,V,X]),Z],64)}}}}]);