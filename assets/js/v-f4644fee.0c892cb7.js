(self.webpackChunkarch_guide=self.webpackChunkarch_guide||[]).push([[140],{228:(n,l,s)=>{"use strict";s.r(l),s.d(l,{data:()=>e});const e={key:"v-f4644fee",path:"/advanced/optional-cfg-2.html",title:"可选配置（进阶）",lang:"zh-CN",frontmatter:{title:"可选配置（进阶）",sidebarDepth:2},excerpt:"",headers:[{level:3,title:"🎑 一分耕耘，一分收获",slug:"🎑-一分耕耘-一分收获",children:[]},{level:3,title:"🔖 这一节将会讨论：",slug:"🔖-这一节将会讨论",children:[]},{level:2,title:"🐧 更换可选内核",slug:"🐧-更换可选内核",children:[]},{level:2,title:"💤 休眠（hibernate）设置",slug:"💤-休眠-hibernate-设置",children:[{level:3,title:"休眠到 Swap 分区",slug:"休眠到-swap-分区",children:[]},{level:3,title:"休眠到 Swap 文件（Btrfs）",slug:"休眠到-swap-文件-btrfs",children:[]},{level:3,title:"休眠到 Swap 文件（ext4）",slug:"休眠到-swap-文件-ext4",children:[]},{level:3,title:"共同后续步骤",slug:"共同后续步骤",children:[]}]},{level:2,title:"🔍 rEFind",slug:"🔍-refind",children:[]}],filePathRelative:"advanced/optional-cfg-2.md",git:{updatedTime:1624113588e3,contributors:[{name:"icekylin",email:"wminid@yeah.net",commits:2}]}}},7911:(n,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>Te});var e=s(6252);const a=s.p+"assets/img/zen.00d2fbf3.png",m=s.p+"assets/img/lts.bbbd8798.png",i=s.p+"assets/img/hardened.3eb4b072.png",r=s.p+"assets/img/kernel-grub-0.1a571e5b.png",t=s.p+"assets/img/kernel-grub-1.c5ef9c65.png",W=s.p+"assets/img/kernel-grub-2.d5b77ffc.png",c=s.p+"assets/img/kernel-refind-0.66935ae3.png",u=s.p+"assets/img/kernel-grub-3.06c6196f.png",o=s.p+"assets/img/kernel-refind-1.1cf95fd2.png",d=s.p+"assets/img/kernel-version-1.c792d11e.png",p=s.p+"assets/img/kernel-version-2.b7c20cdd.png",b=s.p+"assets/img/hibernate-1.f014c3ed.png",k=s.p+"assets/img/hibernate-same-1.9959bdb6.png",g=s.p+"assets/img/hibernate-same-2.cde66122.png",U=s.p+"assets/img/hibernate-same-3.f7d24cb5.png",f=s.p+"assets/img/try-1.bbdcfad9.png",h=s.p+"assets/img/try-2.ccc260d5.png",v=s.p+"assets/img/try-3.96fbb2f9.png",E=s.p+"assets/img/refind-1.43cfc330.png",_=s.p+"assets/img/refind-2.42a451a1.png",x=s.p+"assets/img/refind-3.201899b5.png",w=s.p+"assets/img/refind-4.34cc1ab5.png",B=s.p+"assets/img/refind-5.036dd521.png",D=s.p+"assets/img/refind-6.e0b21ebc.png",A=s.p+"assets/img/refind-7.41427ac0.png",I=s.p+"assets/img/refind-8.bb04c6ba.png",S=s.p+"assets/img/refind-9.338a8f49.png",F=s.p+"assets/img/refind-10.999f2929.png",L=s.p+"assets/img/refind-11.595a3c5e.png",C=s.p+"assets/img/refind-12.847b0f33.png",P=(0,e.Wm)("h1",{id:"其它可选配置-进阶篇"},[(0,e.Wm)("a",{class:"header-anchor",href:"#其它可选配置-进阶篇"},"#"),(0,e.Uk)(" 其它可选配置（进阶篇）")],-1),R=(0,e.Wm)("blockquote",null,[(0,e.Wm)("h3",{id:"🎑-一分耕耘-一分收获"},[(0,e.Wm)("a",{class:"header-anchor",href:"#🎑-一分耕耘-一分收获"},"#"),(0,e.Uk)(" 🎑 一分耕耘，一分收获")]),(0,e.Wm)("p",null,"这一节的配置都是可选的。这些配置根据个人喜好进行配置，往往可以让系统变得更好用")],-1),T=(0,e.Wm)("h3",{id:"🔖-这一节将会讨论"},[(0,e.Wm)("a",{class:"header-anchor",href:"#🔖-这一节将会讨论"},"#"),(0,e.Uk)(" 🔖 这一节将会讨论：")],-1),G={class:"table-of-contents"},y=(0,e.Uk)("🎑 一分耕耘，一分收获"),M=(0,e.Uk)("🔖 这一节将会讨论："),z=(0,e.Uk)("🐧 更换可选内核"),O=(0,e.Uk)("💤 休眠（hibernate）设置"),K=(0,e.Uk)("休眠到 Swap 分区"),N=(0,e.Uk)("休眠到 Swap 文件（Btrfs）"),Y=(0,e.Uk)("休眠到 Swap 文件（ext4）"),q=(0,e.Uk)("共同后续步骤"),Z=(0,e.Uk)("🔍 rEFind"),H=(0,e.Wm)("h2",{id:"🐧-更换可选内核"},[(0,e.Wm)("a",{class:"header-anchor",href:"#🐧-更换可选内核"},"#"),(0,e.Uk)(" 🐧 更换可选内核")],-1),V=(0,e.Uk)("如有需要可参阅 "),X={href:"https://wiki.archlinux.org/title/Kernel_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)",target:"_blank",rel:"noopener noreferrer"},j=(0,e.Uk)("archWiki 相关内容"),J=(0,e.Uk)(" 以及 "),Q={href:"http://www.rodsbooks.com/refind/linux.html",target:"_blank",rel:"noopener noreferrer"},$=(0,e.Uk)("rEFind 官方文档"),nn=(0,e.Uk)("。"),ln=(0,e.Uk)("除了 "),sn={href:"https://archlinux.org/packages/core/x86_64/linux/",target:"_blank",rel:"noopener noreferrer"},en=(0,e.Uk)("linux"),an=(0,e.Uk)(" 内核，还有以下官方支持的内核可供选择："),mn={href:"https://archlinux.org/packages/extra/x86_64/linux-zen/",target:"_blank",rel:"noopener noreferrer"},rn=(0,e.Uk)("linux-zen"),tn=(0,e.Wm)("li",null,"一些内核黑客合作的结果，是适合日常使用的优秀内核",-1),Wn=(0,e.Wm)("li",null,"以吞吐量和功耗为代价来换取性能",-1),cn=(0,e.Uk)("相对 linux 内核加入了 fsync 功能，在一些采用 .Net 的 wine 游戏中会有 "),un={href:"https://github.com/ValveSoftware/Proton/issues/3706#issuecomment-636632984",target:"_blank",rel:"noopener noreferrer"},on=(0,e.Uk)("明显的性能提升"),dn={href:"https://archlinux.org/packages/core/x86_64/linux-lts/",target:"_blank",rel:"noopener noreferrer"},pn=(0,e.Uk)("linux-lts"),bn=(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,"包含了最新的长期支持的 Linux 内核和内核模块"),(0,e.Wm)("li",null,"可以放心地在更长的时间内享受相同的内核版本"),(0,e.Wm)("li",null,"若硬件不是最新硬件，则可以通过安装稍早的 LTS 内核提高稳定性")],-1),kn={href:"https://archlinux.org/packages/extra/x86_64/linux-hardened/",target:"_blank",rel:"noopener noreferrer"},gn=(0,e.Uk)("linux-hardened"),Un=(0,e.Uk)("更加注重安全的内核，采用一系列 "),fn={href:"https://github.com/GrapheneOS/linux-hardened",target:"_blank",rel:"noopener noreferrer"},hn=(0,e.Uk)("加固补丁"),vn=(0,e.Uk)(" 以减少内核和用户空间产生漏洞的风险"),En=(0,e.Wm)("li",null,"启用了一些加固选项，比如用户命名空间（同时通过补丁禁用未授权用户的访问）、审计以及 SELinux",-1),_n=(0,e.Wm)("li",null,"需要注意的是使用此内核时部分软件包将不起作用",-1),xn=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" pacman -S linux-zen linux-zen-headers\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),wn=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" pacman -S linux-lts linux-lts-headers\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Bn=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" pacman -S linux-hardened linux-hardened-headers\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Dn=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:a,alt:"zen"})],-1),An=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:m,alt:"lts"})],-1),In=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:i,alt:"hardened"})],-1),Sn={class:"custom-container tip"},Fn=(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示",-1),Ln=(0,e.Wm)("p",null,"更换内核后还需要留意部分应用需要更换为相应的 dkms 版本。",-1),Cn=(0,e.Wm)("p",null,"本指南涉及的应用如下：",-1),Pn=(0,e.Wm)("code",null,"nvidia-dkms",-1),Rn=(0,e.Wm)("code",null,"bbswitch-dkms",-1),Tn=(0,e.Wm)("blockquote",null,[(0,e.Wm)("h4",{id:"📑-相关资料-dkms"},[(0,e.Wm)("a",{class:"header-anchor",href:"#📑-相关资料-dkms"},"#"),(0,e.Uk)(" 📑 相关资料：DKMS")]),(0,e.Wm)("p",null,[(0,e.Uk)("DKMS，即 "),(0,e.Wm)("strong",null,"D"),(0,e.Uk)("ynamic "),(0,e.Wm)("strong",null,"K"),(0,e.Uk)("ernel "),(0,e.Wm)("strong",null,"M"),(0,e.Uk)("odule "),(0,e.Wm)("strong",null,"S"),(0,e.Uk)("ystem。可以使内核变更（如升级）后自动编译模块，适配新内核。")])],-1),Gn=(0,e.Wm)("ol",{start:"2"},[(0,e.Wm)("li",null,[(0,e.Uk)("为了让 GRUB 记住最后在 GRUB 引导菜单里选择的内核，以便在下次启动时自动使用对应的内核，需要编辑 "),(0,e.Wm)("code",null,"/etc/default/grub"),(0,e.Uk)(" 文件：")])],-1),yn=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"vim"),(0,e.Uk)(" /etc/default/grub\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Mn=(0,e.Wm)("p",null,"在适当位置添加或修改为如下三行：",-1),zn=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token assign-left variable"},"GRUB_DEFAULT"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Uk)("saved "),(0,e.Wm)("span",{class:"token comment"},"# 默认使用保存的内核条目"),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token assign-left variable"},"GRUB_SAVEDEFAULT"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Uk)("true "),(0,e.Wm)("span",{class:"token comment"},"# 保存最后一个使用的内核条目"),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token assign-left variable"},"GRUB_DISABLE_SUBMENU"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Uk)("y "),(0,e.Wm)("span",{class:"token comment"},"# 可选，禁用 GRUB 子菜单，使选择内核的操作更简单"),(0,e.Uk)("\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br")])],-1),On=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:r,alt:"kernel-grub_step-0"})],-1),Kn=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:t,alt:"kernel-grub_step-1"})],-1),Nn=(0,e.Wm)("ol",{start:"3"},[(0,e.Wm)("li",null,"安装完毕后通过以下命令更新一下引导配置即可：")],-1),Yn=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"grub-mkconfig"),(0,e.Uk)(" -o /boot/grub/grub.cfg\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),qn=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:W,alt:"kernel-grub_step-2"})],-1),Zn=(0,e.Wm)("ol",{start:"4"},[(0,e.Wm)("li",null,"rEFind 不需要做额外步骤，但会使用安装的最后一个内核作为默认内核。若想改变默认启动内核，需要修改 rEFind 配置文件：")],-1),Hn=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"vim"),(0,e.Uk)(" /boot/efi/EFI/refind/refind.conf\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Vn={class:"custom-container tip"},Xn=(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示",-1),jn=(0,e.Uk)("若您不是按照本指南章节 "),Jn=(0,e.Uk)("archlinux 基础安装"),Qn=(0,e.Uk)(" 安装的 archlinux，请确认您的 EFI 分区（ESP）位置。"),$n=(0,e.Wm)("p",null,[(0,e.Uk)("将 "),(0,e.Wm)("code",null,"fold_linux_kernels false"),(0,e.Uk)(" 前面的注释（"),(0,e.Wm)("code",null,"#"),(0,e.Uk)("）去掉：")],-1),nl=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:c,alt:"kernel-refind-0"})],-1),ll=(0,e.Uk)("诚然，这不是一个优雅（elegant）的方案。它会将所有的内核直接在引导菜单首页显示出来，而不是在子菜单选择。但 "),sl={href:"https://bbs.archlinux.org/viewtopic.php?id=258751",target:"_blank",rel:"noopener noreferrer"},el=(0,e.Uk)("唯有这样"),al=(0,e.Uk)(" rEFind 才能记住最后选择的内核，而不是安装的最后一个内核。"),ml=(0,e.Wm)("ol",{start:"5"},[(0,e.Wm)("li",null,"重启，查看引导菜单效果：")],-1),il=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:u,alt:"kernel-grub_step-3"})],-1),rl=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:o,alt:"kernel-refind-1"})],-1),tl=(0,e.Wm)("ol",{start:"6"},[(0,e.Wm)("li",null,"使用以下命令查看内核：")],-1),Wl=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"uname"),(0,e.Uk)(" -r\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),cl=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,"neofetch\n")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),ul=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:d,alt:"kernel-version-1"})],-1),ol=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:p,alt:"kernel-version-2"})],-1),dl=(0,e.Wm)("h2",{id:"💤-休眠-hibernate-设置"},[(0,e.Wm)("a",{class:"header-anchor",href:"#💤-休眠-hibernate-设置"},"#"),(0,e.Uk)(" 💤 休眠（hibernate）设置")],-1),pl=(0,e.Uk)("如有需要可以参阅 "),bl={href:"https://wiki.archlinux.org/title/Power_management_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)/Suspend_and_hibernate_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)",target:"_blank",rel:"noopener noreferrer"},kl=(0,e.Uk)("archWiki 相关内容"),gl=(0,e.Uk)("。"),Ul=(0,e.Wm)("p",null,"KDE 自身提供开箱即用的睡眠功能（sleep），即将系统挂起到内存，消耗少量的电量。休眠（hibernate）则会将系统挂起到交换分区或交换文件，几乎不消耗电量。",-1),fl=(0,e.Wm)("p",null,[(0,e.Uk)("挂起到硬盘的映像大小一般最大为物理内存的 "),(0,e.Wm)("code",null,"2/5"),(0,e.Uk)("，其值在 "),(0,e.Wm)("code",null,"/sys/power/image_size"),(0,e.Uk)(" 中确定。故若想使用休眠功能，Swap 大小一般设置为物理内存的 60% 即可。")],-1),hl=(0,e.Wm)("div",{class:"custom-container tip"},[(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示"),(0,e.Wm)("p",null,"若 Swap 分区大小不够，则可尝试创建并休眠到 Swap 文件中。"),(0,e.Wm)("p",null,[(0,e.Uk)("但是需要注意！休眠镜像不能跨多个交换分区和 / 或交换文件。它必须完全适配"),(0,e.Wm)("strong",null,"一个交换分区或一个交换文件"),(0,e.Uk)("。")])],-1),vl=(0,e.Wm)("h3",{id:"休眠到-swap-分区"},[(0,e.Wm)("a",{class:"header-anchor",href:"#休眠到-swap-分区"},"#"),(0,e.Uk)(" 休眠到 Swap 分区")],-1),El=(0,e.Wm)("ol",null,[(0,e.Wm)("li",null,[(0,e.Uk)("通过以下命令确认 Swap 分区的 "),(0,e.Wm)("code",null,"UUID"),(0,e.Uk)("：")])],-1),_l=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,"lsblk -o name,mountpoint,size,uuid\n")]),(0,e.Wm)("div",{class:"highlight-lines"},[(0,e.Wm)("br")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),xl=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" blkid\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),wl=(0,e.Wm)("p",null,"输出结果应类似：",-1),Bl=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Uk)("NAME   MOUNTPOINT              SIZE UUID\nsda                             64G\n├─sda1 /boot/efi               244M E519-88D8\n├─sda2                           1G\n├─sda3                           1G\n├─sda4 "),(0,e.Wm)("span",{class:"token punctuation"},"["),(0,e.Uk)("SWAP"),(0,e.Wm)("span",{class:"token punctuation"},"]"),(0,e.Uk)("                    4G 13ec7b86-eb9c-45a9-ae50-9606279b506a\n└─sda5 /run/timeshift/backup  "),(0,e.Wm)("span",{class:"token number"},"57"),(0,e.Uk)(".8G 860b9d91-590c-44d0-9d38-e4bf137b5d90\nsr0                          "),(0,e.Wm)("span",{class:"token number"},"755"),(0,e.Uk)(".3M "),(0,e.Wm)("span",{class:"token number"},"2021"),(0,e.Uk)("-05-01-05-18-20-00\n")])]),(0,e.Wm)("div",{class:"highlight-lines"},[(0,e.Wm)("br"),(0,e.Wm)("br"),(0,e.Wm)("br"),(0,e.Wm)("br"),(0,e.Wm)("br"),(0,e.Wm)("div",{class:"highlight-line"}," "),(0,e.Wm)("br"),(0,e.Wm)("br")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"4"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"5"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"6"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"7"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"8"),(0,e.Wm)("br")])],-1),Dl=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Uk)("/dev/sr0: "),(0,e.Wm)("span",{class:"token assign-left variable"},"BLOCK_SIZE"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"2048"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"UUID"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"2021-05-01-05-18-20-00"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"LABEL"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"ARCH_202105"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"TYPE"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"iso9660"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"PTTYPE"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"PMBR"'),(0,e.Uk)("\n/dev/sda4: "),(0,e.Wm)("span",{class:"token assign-left variable"},"UUID"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"13ec7b86-eb9c-45a9-ae50-9606279b506a"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"TYPE"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"swap"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"PARTUUID"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"7a9e75d7-eca2-c849-9372-85c6889a7861"'),(0,e.Uk)("\n/dev/sda2: "),(0,e.Wm)("span",{class:"token assign-left variable"},"PARTUUID"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"bfc5f742-be1e-cb41-911f-ec5466d670de"'),(0,e.Uk)("\n/dev/sda5: "),(0,e.Wm)("span",{class:"token assign-left variable"},"LABEL"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"myArch"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"UUID"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"860b9d91-590c-44d0-9d38-e4bf137b5d90"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"UUID_SUB"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"5551b2c6-b767-4459-b7fc-de91500baec0"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"BLOCK_SIZE"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"4096"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"TYPE"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"btrfs"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"PARTUUID"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"815c3576-3bb8-dc4e-86d4-f41c45cffd42"'),(0,e.Uk)("\n/dev/sda3: "),(0,e.Wm)("span",{class:"token assign-left variable"},"PARTUUID"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"23bddb1f-4ef9-844c-a92a-805a4063e3c1"'),(0,e.Uk)("\n/dev/sda1: "),(0,e.Wm)("span",{class:"token assign-left variable"},"SEC_TYPE"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"msdos"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"UUID"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"E519-88D8"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"BLOCK_SIZE"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"512"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"TYPE"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"vfat"'),(0,e.Uk)(),(0,e.Wm)("span",{class:"token assign-left variable"},"PARTUUID"),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Wm)("span",{class:"token string"},'"1976beb2-c881-8046-9066-21d5dac457ce"'),(0,e.Uk)("\n")])]),(0,e.Wm)("div",{class:"highlight-lines"},[(0,e.Wm)("br"),(0,e.Wm)("div",{class:"highlight-line"}," "),(0,e.Wm)("br"),(0,e.Wm)("br"),(0,e.Wm)("br"),(0,e.Wm)("br")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"4"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"5"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"6"),(0,e.Wm)("br")])],-1),Al=(0,e.Wm)("blockquote",null,[(0,e.Wm)("h4",{id:"📑-相关资料-uuid"},[(0,e.Wm)("a",{class:"header-anchor",href:"#📑-相关资料-uuid"},"#"),(0,e.Uk)(" 📑 相关资料：UUID")]),(0,e.Wm)("p",null,[(0,e.Uk)("UUID 即 "),(0,e.Wm)("strong",null,"U"),(0,e.Uk)("niversally "),(0,e.Wm)("strong",null,"U"),(0,e.Uk)("nique "),(0,e.Wm)("strong",null,"Id"),(0,e.Uk)("entifier（通用唯一识别码），它可以帮助 Linux 系统识别一个磁盘分区而不是块设备文件。")])],-1),Il=(0,e.Wm)("ol",{start:"2"},[(0,e.Wm)("li",null,[(0,e.Uk)("使用 "),(0,e.Wm)("code",null,"vim"),(0,e.Uk)(" 编辑 "),(0,e.Wm)("code",null,"/etc/default/grub"),(0,e.Uk)(" 文件：")])],-1),Sl=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"vim"),(0,e.Uk)(" /etc/default/grub\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Fl=(0,e.Wm)("p",null,[(0,e.Uk)("将相关参数加入内核启动参数中 —— 找到 "),(0,e.Wm)("code",null,"GRUB_CMDLINE_LINUX_DEFAULT"),(0,e.Uk)(" 一行，在其值后添加类似如下数据（根据你自身的 UUID 确定，参数之间以空格分隔）：")],-1),Ll=(0,e.Wm)("div",{class:"language-conf ext-conf line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-conf"},[(0,e.Wm)("code",null,"resume=UUID=13ec7b86-eb9c-45a9-ae50-9606279b506a\n")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Cl=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:b,alt:"hibernate_step-1"})],-1),Pl=(0,e.Wm)("h4",{id:"🍧-碎碎念"},[(0,e.Wm)("a",{class:"header-anchor",href:"#🍧-碎碎念"},"#"),(0,e.Uk)(" 🍧 碎碎念")],-1),Rl=(0,e.Uk)("这个内核启动参数在步骤 "),Tl=(0,e.Uk)("17. 安装引导程序"),Gl=(0,e.Uk)(" 中也修改过，现在应该稍微熟悉一点了吧？"),yl={start:"3"},Ml=(0,e.Uk)("接下来参考步骤 "),zl=(0,e.Uk)("共同后续步骤"),Ol=(0,e.Uk)(" 完成配置。"),Kl=(0,e.Wm)("h3",{id:"休眠到-swap-文件-btrfs"},[(0,e.Wm)("a",{class:"header-anchor",href:"#休眠到-swap-文件-btrfs"},"#"),(0,e.Uk)(" 休眠到 Swap 文件（Btrfs）")],-1),Nl=(0,e.Wm)("h3",{id:"休眠到-swap-文件-ext4"},[(0,e.Wm)("a",{class:"header-anchor",href:"#休眠到-swap-文件-ext4"},"#"),(0,e.Uk)(" 休眠到 Swap 文件（ext4）")],-1),Yl=(0,e.Wm)("ol",null,[(0,e.Wm)("li",null,[(0,e.Uk)("首先确认 Swap 文件所在分区的 "),(0,e.Wm)("code",null,"UUID"),(0,e.Uk)("：")])],-1),ql=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" findmnt -no UUID -T /swapfile\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Zl=(0,e.Wm)("ol",{start:"2"},[(0,e.Wm)("li",null,"确认 Swap 文件的偏移值：")],-1),Hl=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" filefrag -v /swapfile\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Vl=(0,e.Wm)("p",null,[(0,e.Uk)("第一行数据中的 "),(0,e.Wm)("code",null,"physical_offset"),(0,e.Uk)(" 一列的值即为所需要的数据。")],-1),Xl=(0,e.Wm)("ol",{start:"3"},[(0,e.Wm)("li",null,[(0,e.Uk)("随后将这两个参数加入内核启动参数中。通过 "),(0,e.Wm)("code",null,"vim"),(0,e.Uk)(" 编辑 "),(0,e.Wm)("code",null,"/etc/default/grub"),(0,e.Uk)(" 文件：")])],-1),jl=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"vim"),(0,e.Uk)(" /etc/default/grub\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Jl=(0,e.Wm)("p",null,[(0,e.Uk)("找到 "),(0,e.Wm)("code",null,"GRUB_CMDLINE_LINUX_DEFAULT"),(0,e.Uk)(" 一行，在其值后添加类似如下两项数据，内容根据刚才查询的 "),(0,e.Wm)("code",null,"UUID"),(0,e.Uk)(" 以及偏移值确定。参数以空格分隔：")],-1),Ql=(0,e.Wm)("div",{class:"language-conf ext-conf line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-conf"},[(0,e.Wm)("code",null,"resume=UUID=9a940a0a-fa72-4973-9ccc-3eb93ad73b37 resume_offset=6418432\n")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),$l={start:"4"},ns=(0,e.Uk)("接下来参考步骤 "),ls=(0,e.Uk)("共同后续步骤"),ss=(0,e.Uk)(" 完成配置。"),es=(0,e.Wm)("h3",{id:"共同后续步骤"},[(0,e.Wm)("a",{class:"header-anchor",href:"#共同后续步骤"},"#"),(0,e.Uk)(" 共同后续步骤")],-1),as=(0,e.Wm)("ol",null,[(0,e.Wm)("li",null,"通过以下命令更新 GRUB 配置：")],-1),ms=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"grub-mkconfig"),(0,e.Uk)(" -o /boot/grub/grub.cfg\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),is=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:k,alt:"hibernate-same_step-1"})],-1),rs=(0,e.Wm)("ol",{start:"2"},[(0,e.Wm)("li",null,[(0,e.Uk)("除此之外，还需配置 "),(0,e.Wm)("code",null,"initranfs"),(0,e.Uk)(" 的 "),(0,e.Wm)("code",null,"resume"),(0,e.Uk)(" 钩子。使用 "),(0,e.Wm)("code",null,"vim"),(0,e.Uk)(" 编辑 "),(0,e.Wm)("code",null,"/etc/mkinitcpio.conf"),(0,e.Uk)("：")])],-1),ts=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"vim"),(0,e.Uk)(" /etc/mkinitcpio.conf\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Ws=(0,e.Wm)("p",null,[(0,e.Uk)("在 HOOKS 行添加 "),(0,e.Wm)("code",null,"resume"),(0,e.Uk)(" 值。注意，"),(0,e.Wm)("code",null,"resume"),(0,e.Uk)(" 需要加入在 "),(0,e.Wm)("code",null,"udev"),(0,e.Uk)(" 后。若使用了 LVM 分区，"),(0,e.Wm)("code",null,"resume"),(0,e.Uk)(" 需要加入在 "),(0,e.Wm)("code",null,"lvm2"),(0,e.Uk)(" 后：")],-1),cs=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:g,alt:"hibernate-same_step-2"})],-1),us=(0,e.Wm)("div",{class:"custom-container tip"},[(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示"),(0,e.Wm)("p",null,[(0,e.Uk)("使用 Intel CPU 并且为触摸板加载 "),(0,e.Wm)("code",null,"intel_lpss_pci"),(0,e.Uk)(" 模块的笔记本电脑，可能会在唤醒时发生内核崩溃（Caps Lock 灯闪烁），黑屏并无法成功唤醒。")]),(0,e.Wm)("p",null,[(0,e.Uk)("此时需要编辑 "),(0,e.Wm)("code",null,"/etc/mkinitcpio.conf"),(0,e.Uk)("，在 MODULES 行添加 "),(0,e.Wm)("code",null,"intel_lpss_pci"),(0,e.Uk)(" 值：")]),(0,e.Wm)("div",{class:"language-conf ext-conf line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-conf"},[(0,e.Wm)("code",null,"MODULES=(intel_lpss_pci)\n")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])])],-1),os=(0,e.Wm)("ol",{start:"3"},[(0,e.Wm)("li",null,[(0,e.Uk)("最后通过以下命令重新生成 "),(0,e.Wm)("code",null,"initramfs"),(0,e.Uk)(" 镜像：")])],-1),ds=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" mkinitcpio -P\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),ps=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:U,alt:"hibernate-same_step-3"})],-1),bs=(0,e.Wm)("ol",{start:"4"},[(0,e.Wm)("li",null,[(0,e.Wm)("p",null,"重启电脑")]),(0,e.Wm)("li",null,[(0,e.Wm)("p",null,"重启之后可以开几个应用，尝试休眠：")])],-1),ks=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:f,alt:"try-1"})],-1),gs=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:h,alt:"try-2"})],-1),Us=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:v,alt:"try-3"})],-1),fs=(0,e.Wm)("p",null,"虚拟机也可以通过休眠成功唤醒。",-1),hs=(0,e.Wm)("div",{class:"custom-container tip"},[(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示"),(0,e.Wm)("p",null,"虚拟机可能在休眠唤醒后的关机时发生内核崩溃（Caps Lock 灯也会闪烁）。")],-1),vs=(0,e.Wm)("h2",{id:"🔍-refind"},[(0,e.Wm)("a",{class:"header-anchor",href:"#🔍-refind"},"#"),(0,e.Uk)(" 🔍 rEFind")],-1),Es=(0,e.Uk)("如有需要可以参考 "),_s={href:"https://wiki.archlinux.org/title/REFInd_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)",target:"_blank",rel:"noopener noreferrer"},xs=(0,e.Uk)("archWiki 相关内容"),ws=(0,e.Uk)("。"),Bs=(0,e.Wm)("p",null,"相对于 GRUB，rEFind 的启动项更加灵活，相对来说也更加美观。",-1),Ds=(0,e.Wm)("ol",null,[(0,e.Wm)("li",null,[(0,e.Uk)("使用以下命令安装 "),(0,e.Wm)("code",null,"refind"),(0,e.Uk)(" 包：")])],-1),As=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" pacman -S refind\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Is=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:E,alt:"refind-1"})],-1),Ss=(0,e.Wm)("ol",{start:"2"},[(0,e.Wm)("li",null,"使用以下命令安装 rEFInd 启动管理器到 EFI 分区：")],-1),Fs=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" refind-install\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Ls=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:_,alt:"refind-2"})],-1),Cs=(0,e.Wm)("ol",{start:"3"},[(0,e.Wm)("li",null,"使用以下命令复查安装情况：")],-1),Ps=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"ls"),(0,e.Uk)(" -ahl /boot/efi/EFI/\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Rs={class:"custom-container tip"},Ts=(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示",-1),Gs=(0,e.Uk)("若您不是按照本指南章节 "),ys=(0,e.Uk)("archlinux 基础安装"),Ms=(0,e.Uk)(" 安装的 archlinux，请确认您的 EFI 分区（ESP）位置。"),zs=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:x,alt:"refind-3"})],-1),Os=(0,e.Wm)("p",null,[(0,e.Uk)("输出结果应该可以看到 "),(0,e.Wm)("code",null,"refind"),(0,e.Uk)(" 文件夹。")],-1),Ks=(0,e.Wm)("ol",{start:"4"},[(0,e.Wm)("li",null,[(0,e.Uk)("使用 "),(0,e.Wm)("code",null,"vim"),(0,e.Uk)(" 编辑 "),(0,e.Wm)("code",null,"/boot/efi/EFI/refind/refind.conf"),(0,e.Uk)(" 文件：")])],-1),Ns=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"vim"),(0,e.Uk)(" /boot/efi/EFI/refind/refind.conf\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Ys=(0,e.Wm)("p",null,"修改等待时间为合适数值（自定义）：",-1),qs=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"timeout"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token number"},"5"),(0,e.Uk)("\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Zs=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:w,alt:"refind-4"})],-1),Hs=(0,e.Wm)("p",null,[(0,e.Uk)("为了使 rEFInd 支持 archlinux 内核命名方案并使其与各自的 initramfs 镜像相匹配，取消注释并编辑 "),(0,e.Wm)("code",null,"extra_kernel_version_strings"),(0,e.Uk)(" 所在行：")],-1),Vs=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,"extra_kernel_version_strings linux-hardened,linux-zen,linux-lts,linux\n")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Xs=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:B,alt:"refind-5"})],-1),js=(0,e.Wm)("p",null,[(0,e.Uk)("为了允许在 Btrfs 子卷上进行内核自动检测，取消注释并编辑 "),(0,e.Wm)("code",null,"also_scan_dirs"),(0,e.Uk)("，在最后加上 "),(0,e.Wm)("code",null,"@/boot"),(0,e.Uk)("：")],-1),Js=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,"also_scan_dirs boot,ESP2:EFI/linux/kernels,@/boot\n")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Qs={class:"custom-container tip"},$s=(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示",-1),ne=(0,e.Uk)("若您不是按照本指南章节 "),le=(0,e.Uk)("archlinux 基础安装"),se=(0,e.Uk)(" 安装的 archlinux："),ee=(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,"若使用了 ext4 文件系统，则不用修改这一行。"),(0,e.Wm)("li",null,[(0,e.Uk)("若使用了 Btrfs 文件系统，请确认根目录或 "),(0,e.Wm)("code",null,"/boot"),(0,e.Uk)(" 目录对应子卷位置（简而言之这个位置是从 Btrfs 文件系统最上层开始寻找的）")])],-1),ae=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:D,alt:"refind-6"})],-1),me={start:"5"},ie=(0,e.Wm)("li",null,[(0,e.Wm)("p",null,[(0,e.Uk)("保存并退出 "),(0,e.Wm)("code",null,"vim")])],-1),re=(0,e.Uk)("若安装 archlinux 时按照步骤 "),te=(0,e.Uk)("7. 分区和格式化（使用 Btrfs 文件系统）"),We=(0,e.Uk)(" 使用了 Btrfs 文件系统，为了让 rEFind 支持 Btrfs 子卷，需要使用以下命令手动为 rEFind 安装驱动："),ce=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"cp"),(0,e.Uk)(" /usr/share/refind/drivers_x64/btrfs_x64.efi /boot/efi/EFI/refind/drivers_x64/btrfs_x64.efi\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),ue=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:A,alt:"refind-7"})],-1),oe=(0,e.Wm)("ol",{start:"7"},[(0,e.Wm)("li",null,"使用以下命令复查安装情况：")],-1),de=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"ls"),(0,e.Uk)(" -ahl /boot/efi/EFI/refind/drivers_x64/\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),pe=(0,e.Wm)("p",null,"输出如下：",-1),be=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Uk)("-rwxr-xr-x "),(0,e.Wm)("span",{class:"token number"},"1"),(0,e.Uk)(" root root 114K Jun "),(0,e.Wm)("span",{class:"token number"},"15"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token number"},"23"),(0,e.Uk)(":00 /boot/efi/EFI/refind/drivers_x64/btrfs_x64.efi\n")])]),(0,e.Wm)("div",{class:"highlight-lines"},[(0,e.Wm)("div",{class:"highlight-line"}," ")]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),ke=(0,e.Wm)("ol",{start:"8"},[(0,e.Wm)("li",null,[(0,e.Uk)("使用以下命令在内核所在文件夹（"),(0,e.Wm)("code",null,"/boot"),(0,e.Uk)("）创建包含内核参数的 "),(0,e.Wm)("code",null,"refind_linux.conf"),(0,e.Uk)(" 文件：")])],-1),ge=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"sudo"),(0,e.Uk)(" mkrlconf --force\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),Ue=(0,e.Wm)("div",{class:"custom-container tip"},[(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示"),(0,e.Wm)("p",null,[(0,e.Uk)("对于自动检测到的内核，可以在 "),(0,e.Wm)("code",null,"/boot/refind_linux.conf"),(0,e.Uk)(" 中显式指定内核参数，也可以依靠 rEFInd 识别根分区和内核参数的能力。此处便是使用了后者。")]),(0,e.Wm)("p",null,[(0,e.Uk)("若要修改内核参数，可以用 GRUB 使用新内核参数登录系统后重新使用此步骤命令重新生成 "),(0,e.Wm)("code",null,"/boot/refind_linux.conf"),(0,e.Uk)(" 文件，也可以直接在 "),(0,e.Wm)("code",null,"/boot/refind_linux.conf"),(0,e.Uk)(" 显式指定内核参数。")])],-1),fe=(0,e.Wm)("ol",{start:"9"},[(0,e.Wm)("li",null,[(0,e.Uk)("复查 "),(0,e.Wm)("code",null,"/boot/refind_linux.conf"),(0,e.Uk)(" 文件：")])],-1),he=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token function"},"cat"),(0,e.Uk)(" /boot/refind_linux.conf\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),ve=(0,e.Wm)("p",null,"输出如下：",-1),Ee=(0,e.Wm)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-bash"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token string"},'"Boot with standard options"'),(0,e.Uk)("  "),(0,e.Wm)("span",{class:"token string"},'"root=UUID=860b9d91-590c-44d0-9d38-e4bf137b5d90 rw rootflags=subvol=@ loglevel=5 nowatchdog resume=UUID=13ec7b86-eb9c-45a9-ae50-9606279b506a"'),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token string"},'"Boot to single-user mode"'),(0,e.Uk)("    "),(0,e.Wm)("span",{class:"token string"},'"root=UUID=860b9d91-590c-44d0-9d38-e4bf137b5d90 rw rootflags=subvol=@ loglevel=5 nowatchdog resume=UUID=13ec7b86-eb9c-45a9-ae50-9606279b506a single"'),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token string"},'"Boot with minimal options"'),(0,e.Uk)("   "),(0,e.Wm)("span",{class:"token string"},'"ro root=UUID=860b9d91-590c-44d0-9d38-e4bf137b5d90"'),(0,e.Uk)("\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br")])],-1),_e={class:"custom-container tip"},xe=(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示",-1),we=(0,e.Uk)("若需要配置默认引导内核，请参阅步骤 "),Be=(0,e.Uk)("🐧 更换可选内核"),De=(0,e.Uk)("。"),Ae=(0,e.Wm)("ol",{start:"10"},[(0,e.Wm)("li",null,"重启电脑，便可以看到 rEFind 的引导页面了：")],-1),Ie=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:I,alt:"refind-8"})],-1),Se=(0,e.Wm)("p",null,"这个选项是通过 GRUB 套娃启动系统。",-1),Fe=(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:S,alt:"refind-9"})],-1),Le=(0,e.Wm)("p",null,"这个选项是通过 rEFind 直接引导进入系统。",-1),Ce=(0,e.Wm)("div",{class:"custom-container tip"},[(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示"),(0,e.Wm)("p",null,"若引导了 win10 也会显示出来。")],-1),Pe=(0,e.Wm)("div",{class:"custom-container tip"},[(0,e.Wm)("p",{class:"custom-container-title"},"ℹ️ 提示"),(0,e.Wm)("p",null,"后面两位是虚拟机安装 archlinux 后留下来的安装镜像（实体机没有），不想要可以请使用以下步骤移除"),(0,e.Wm)("ol",null,[(0,e.Wm)("li",null,[(0,e.Uk)("关闭虚拟机后打开虚拟机设置 > 侧栏 "),(0,e.Wm)("code",null,"存储"),(0,e.Uk)(" > 点击右侧 "),(0,e.Wm)("code",null,"分配光驱"),(0,e.Uk)(" 的右侧光盘小图标：")])]),(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:F,alt:"refind-10"})]),(0,e.Wm)("ol",{start:"2"},[(0,e.Wm)("li",null,[(0,e.Uk)("点击 "),(0,e.Wm)("code",null,"移除虚拟盘"),(0,e.Uk)("：")])]),(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:L,alt:"refind-11"})]),(0,e.Wm)("ol",{start:"3"},[(0,e.Wm)("li",null,"开启虚拟机，查看效果：")]),(0,e.Wm)("p",null,[(0,e.Wm)("img",{src:C,alt:"refind-12"})])],-1),Re=(0,e.Wm)("p",null,[(0,e.Uk)("关于 rEFind 的美化请参阅 "),(0,e.Wm)("a",{href:""},"系统美化"),(0,e.Uk)("。")],-1),Te={render:function(n,l){const s=(0,e.up)("RouterLink"),a=(0,e.up)("OutboundLink"),m=(0,e.up)("CodeGroupItem"),i=(0,e.up)("CodeGroup");return(0,e.wg)(),(0,e.j4)(e.HY,null,[P,R,(0,e.Wm)("blockquote",null,[T,(0,e.Wm)("nav",G,[(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#🎑-一分耕耘-一分收获"},{default:(0,e.w5)((()=>[y])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#🔖-这一节将会讨论"},{default:(0,e.w5)((()=>[M])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#🐧-更换可选内核"},{default:(0,e.w5)((()=>[z])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#💤-休眠-hibernate-设置"},{default:(0,e.w5)((()=>[O])),_:1}),(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#休眠到-swap-分区"},{default:(0,e.w5)((()=>[K])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#休眠到-swap-文件-btrfs"},{default:(0,e.w5)((()=>[N])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#休眠到-swap-文件-ext4"},{default:(0,e.w5)((()=>[Y])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#共同后续步骤"},{default:(0,e.w5)((()=>[q])),_:1})])])]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"#🔍-refind"},{default:(0,e.w5)((()=>[Z])),_:1})])])])]),H,(0,e.Wm)("p",null,[V,(0,e.Wm)("a",X,[j,(0,e.Wm)(a)]),J,(0,e.Wm)("a",Q,[$,(0,e.Wm)(a)]),nn]),(0,e.Wm)("p",null,[ln,(0,e.Wm)("a",sn,[en,(0,e.Wm)(a)]),an]),(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[(0,e.Wm)("a",mn,[rn,(0,e.Wm)(a)]),(0,e.Wm)("ul",null,[tn,Wn,(0,e.Wm)("li",null,[cn,(0,e.Wm)("a",un,[on,(0,e.Wm)(a)])])])]),(0,e.Wm)("li",null,[(0,e.Wm)("a",dn,[pn,(0,e.Wm)(a)]),bn]),(0,e.Wm)("li",null,[(0,e.Wm)("a",kn,[gn,(0,e.Wm)(a)]),(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[Un,(0,e.Wm)("a",fn,[hn,(0,e.Wm)(a)]),vn]),En,_n])])]),(0,e.Wm)(i,null,{default:(0,e.w5)((()=>[(0,e.Wm)(m,{title:"zen"},{default:(0,e.w5)((()=>[xn])),_:1}),(0,e.Wm)(m,{title:"lts"},{default:(0,e.w5)((()=>[wn])),_:1}),(0,e.Wm)(m,{title:"hardened"},{default:(0,e.w5)((()=>[Bn])),_:1})])),_:1}),Dn,An,In,(0,e.Wm)("div",Sn,[Fn,Ln,Cn,(0,e.Wm)("ul",null,[(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"/advanced/graphic-driver.html#nvidia-%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1"},{default:(0,e.w5)((()=>[Pn])),_:1})]),(0,e.Wm)("li",null,[(0,e.Wm)(s,{to:"/advanced/graphic-driver.html#%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86"},{default:(0,e.w5)((()=>[Rn])),_:1})])])]),Tn,Gn,yn,Mn,zn,On,Kn,Nn,Yn,qn,Zn,Hn,(0,e.Wm)("div",Vn,[Xn,(0,e.Wm)("p",null,[jn,(0,e.Wm)(s,{to:"/advanced/basic-install.html"},{default:(0,e.w5)((()=>[Jn])),_:1}),Qn])]),$n,nl,(0,e.Wm)("p",null,[ll,(0,e.Wm)("a",sl,[el,(0,e.Wm)(a)]),al]),ml,il,rl,tl,(0,e.Wm)(i,null,{default:(0,e.w5)((()=>[(0,e.Wm)(m,{title:"uname"},{default:(0,e.w5)((()=>[Wl])),_:1}),(0,e.Wm)(m,{title:"neofetch"},{default:(0,e.w5)((()=>[cl])),_:1})])),_:1}),ul,ol,dl,(0,e.Wm)("p",null,[pl,(0,e.Wm)("a",bl,[kl,(0,e.Wm)(a)]),gl]),Ul,fl,hl,vl,El,(0,e.Wm)(i,null,{default:(0,e.w5)((()=>[(0,e.Wm)(m,{title:"lsblk"},{default:(0,e.w5)((()=>[_l])),_:1}),(0,e.Wm)(m,{title:"blkid"},{default:(0,e.w5)((()=>[xl])),_:1})])),_:1}),wl,(0,e.Wm)(i,null,{default:(0,e.w5)((()=>[(0,e.Wm)(m,{title:"lsblk"},{default:(0,e.w5)((()=>[Bl])),_:1}),(0,e.Wm)(m,{title:"blkid"},{default:(0,e.w5)((()=>[Dl])),_:1})])),_:1}),Al,Il,Sl,Fl,Ll,Cl,(0,e.Wm)("blockquote",null,[Pl,(0,e.Wm)("p",null,[Rl,(0,e.Wm)(s,{to:"/advanced/basic-install.html#_17-%E5%AE%89%E8%A3%85%E5%BC%95%E5%AF%BC%E7%A8%8B%E5%BA%8F"},{default:(0,e.w5)((()=>[Tl])),_:1}),Gl])]),(0,e.Wm)("ol",yl,[(0,e.Wm)("li",null,[Ml,(0,e.Wm)(s,{to:"/advanced/optional-cfg.html#%E5%85%B1%E5%90%8C%E5%90%8E%E7%BB%AD%E6%AD%A5%E9%AA%A4"},{default:(0,e.w5)((()=>[zl])),_:1}),Ol])]),Kl,Nl,Yl,ql,Zl,Hl,Vl,Xl,jl,Jl,Ql,(0,e.Wm)("ol",$l,[(0,e.Wm)("li",null,[ns,(0,e.Wm)(s,{to:"/advanced/optional-cfg.html#%E5%85%B1%E5%90%8C%E5%90%8E%E7%BB%AD%E6%AD%A5%E9%AA%A4"},{default:(0,e.w5)((()=>[ls])),_:1}),ss])]),es,as,ms,is,rs,ts,Ws,cs,us,os,ds,ps,bs,ks,gs,Us,fs,hs,vs,(0,e.Wm)("p",null,[Es,(0,e.Wm)("a",_s,[xs,(0,e.Wm)(a)]),ws]),Bs,Ds,As,Is,Ss,Fs,Ls,Cs,Ps,(0,e.Wm)("div",Rs,[Ts,(0,e.Wm)("p",null,[Gs,(0,e.Wm)(s,{to:"/advanced/basic-install.html"},{default:(0,e.w5)((()=>[ys])),_:1}),Ms])]),zs,Os,Ks,Ns,Ys,qs,Zs,Hs,Vs,Xs,js,Js,(0,e.Wm)("div",Qs,[$s,(0,e.Wm)("p",null,[ne,(0,e.Wm)(s,{to:"/advanced/basic-install.html"},{default:(0,e.w5)((()=>[le])),_:1}),se]),ee]),ae,(0,e.Wm)("ol",me,[ie,(0,e.Wm)("li",null,[(0,e.Wm)("p",null,[re,(0,e.Wm)(s,{to:"/advanced/basic-install.html#_7-%E5%88%86%E5%8C%BA%E5%92%8C%E6%A0%BC%E5%BC%8F%E5%8C%96-%E4%BD%BF%E7%94%A8-btrfs-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"},{default:(0,e.w5)((()=>[te])),_:1}),We])])]),ce,ue,oe,de,pe,be,ke,ge,Ue,fe,he,ve,Ee,(0,e.Wm)("div",_e,[xe,(0,e.Wm)("p",null,[we,(0,e.Wm)(s,{to:"/advanced/optional-cfg-2.html#%F0%9F%90%A7-%E6%9B%B4%E6%8D%A2%E5%8F%AF%E9%80%89%E5%86%85%E6%A0%B8"},{default:(0,e.w5)((()=>[Be])),_:1}),De])]),Ae,Ie,Se,Fe,Le,Ce,Pe,Re],64)}}}}]);